---
title: 深入理解计算机系统 BombLab
top: false
cover: false
img: 'http://q9apk9x38.bkt.clouddn.com/medias/featureimages/csapp_b.jpg'
toc: true
mathjax: true
date: 2020-05-07 18:52:10
password:
summary: CSAPP BombLab实验报告
tags:
    - CSAPP
    - LAB
categories:
    - 计算机基础
---

# CSAPP BombLab实验报告

## 前言

>  一直听说CSAPP BombLab极为有趣  
    官网是这么描述的  
     It's also great fun. A legendary lab among the CMU undergrads.

- 从官网下载handout，在x86-64环境下跑
- 没有想象中的有趣，不过作为一个本身枯燥乏味，练习debugger的作业，那还是非常棒的。  
可能因为期望太高，也有可能这是给self-study的"offline" version，毕竟其特色的自动评分，还有scoreboard肯定比一个人好玩多了。  
- 有一些非常有趣的彩蛋
    - 在直接运行bomb时，按下Ctrl-C，Dr.Evil会有话对你说，博主第一次碰到时心想这么不讲道理退不出来？  :satisfied:
    - writeup告诉你有6个phases，并且告诉你总分是70分，4x10+2x15也刚刚好  
    但是bomb.c最后藏了个彩蛋！  
    "Wow, they got it!  But isn't something... missing? Perhaps
     something they overlooked?  Mua ha ha ha ha!"  
     博主刚开始以为他只是像戏剧那样，吓唬吓唬人留个悬念。后来做完6个phases去看其他人的题解，发现还真有个隐藏的phase！  
     之前看到明显没调用到的函数，还以为是给不同的版本的bomb做的 :sob:  
    - 有几个phases的key不是唯一的，也就是说，只有完全读懂代码才能真正意义上解开。  
    你以为你解开了？不，并没有（博主属于误打误撞没有真正解开那类
- 整体做下来感觉难度没有想象中的大，不要被符号表一堆东西吓着了，其实只需要读几个函数就可以了。  
    而且难度梯度友好，特别是前几个phases，甚至不用读懂全部代码，光凭感觉就可以！  

## 题解

- 想来想去，感觉没啥好写的，按照官网给的GDB CheatSheet做就可以了（我不会告诉你是因为我懒的
- 没有题解，没有写总结的话这篇博文就失去了意义，不过前言写都写了就不删了，当个留念吧。（反正我写的博文都没什么意义
- 博主从[这](https://wdxtub.com/csapp/thick-csapp-lab-2/2016/04/16/)学到了一个技巧，虽然GDB CheatSheet里有，但是之前做secret_phase时，画二叉树是一个一个手动敲地址的。  
    效果如下
```bash
(gdb) x/120xw 0x6030f0
0x6030f0 <n1>:  0x00000024      0x00000000      0x00603110      0x00000000
0x603100 <n1+16>:       0x00603130      0x00000000      0x00000000      0x00000000
0x603110 <n21>: 0x00000008      0x00000000      0x00603190      0x00000000
0x603120 <n21+16>:      0x00603150      0x00000000      0x00000000      0x00000000
0x603130 <n22>: 0x00000032      0x00000000      0x00603170      0x00000000
0x603140 <n22+16>:      0x006031b0      0x00000000      0x00000000      0x00000000
0x603150 <n32>: 0x00000016      0x00000000      0x00603270      0x00000000
0x603160 <n32+16>:      0x00603230      0x00000000      0x00000000      0x00000000
0x603170 <n33>: 0x0000002d      0x00000000      0x006031d0      0x00000000
0x603180 <n33+16>:      0x00603290      0x00000000      0x00000000      0x00000000
0x603190 <n31>: 0x00000006      0x00000000      0x006031f0      0x00000000
0x6031a0 <n31+16>:      0x00603250      0x00000000      0x00000000      0x00000000
0x6031b0 <n34>: 0x0000006b      0x00000000      0x00603210      0x00000000
0x6031c0 <n34+16>:      0x006032b0      0x00000000      0x00000000      0x00000000
0x6031d0 <n45>: 0x00000028      0x00000000      0x00000000      0x00000000
0x6031e0 <n45+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x6031f0 <n41>: 0x00000001      0x00000000      0x00000000      0x00000000
0x603200 <n41+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x603210 <n47>: 0x00000063      0x00000000      0x00000000      0x00000000
0x603220 <n47+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x603230 <n44>: 0x00000023      0x00000000      0x00000000      0x00000000
0x603240 <n44+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x603250 <n42>: 0x00000007      0x00000000      0x00000000      0x00000000
0x603260 <n42+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x603270 <n43>: 0x00000014      0x00000000      0x00000000      0x00000000
0x603280 <n43+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x603290 <n46>: 0x0000002f      0x00000000      0x00000000      0x00000000
0x6032a0 <n46+16>:      0x00000000      0x00000000      0x00000000      0x00000000
0x6032b0 <n48>: 0x000003e9      0x00000000      0x00000000      0x00000000
0x6032c0 <n48+16>:      0x00000000      0x00000000      0x00000000      0x00000000
```

## key

```bash
Border relations with Canada have never been better.
1 2 4 8 16 32
1 311
7 0 DrEvil
9?>567
4 3 2 1 6 5
22

```